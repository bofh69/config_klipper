[gcode_button BUTTON_LAMP]
pin: ^!rpi:gpio4
press_gcode:
    {% if printer['output_pin caselight'].value|float == 0 %}
        LED_ON
    {% else %}
        LED_OFF
    {% endif %}


[gcode_button BUTTON_HEAT]
pin: ^!rpi:gpio17
press_gcode:
    {% if printer[printer.toolhead.extruder].target|float < 200 %}
        M104 S200
        M140 S0
    {% elif (printer[printer.toolhead.extruder].target|float == 200) and (printer['heater_bed'].target|float < 60) %}
        M140 S60
    {% elif (printer[printer.toolhead.extruder].target|float < 245)  %}
        M104 S245
        M140 S0
    {% elif (printer[printer.toolhead.extruder].target|float == 245) and (printer['heater_bed'].target|float < 100) %}
        M140 S100
    {% else %}
        M104 S0
        M140 S0
    {% endif %}


[gcode_button BUTTON_PLAY_PAUSE]
pin: ^!rpi:gpio27
press_gcode:
    {% if printer['pause_resume'].is_paused|int == 0 %}
        PAUSE
    {% else %}
        RESUME
    {% endif %}
    

[gcode_button BUTTON_FEED]
pin: ^!rpi:gpio22
press_gcode:
    {% if printer[printer.toolhead.extruder].temperature >= 180 %}
        SAVE_GCODE_STATE NAME=__filament__load
        M83
        G1 E5 F240
        RESTORE_GCODE_STATE NAME=__filament__load
    {% else %}
        BEEP freq=100 dur=150
    {% endif %}
